<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>SDAT of Day</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <link rel="stylesheet" th:href="@{/styles/style.css}"/>
</head>
<script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
<script th:src="@{/js/chartjs.umd.js}"></script>
<script th:src="@{/js/chartjs-plugin-zoom.min.js}"></script>
<body>
<div style="width: 100%;">
    <label>
        <select id="chart-selection-dropdown">
        </select>
    </label>

    <canvas id="sdat-file-chart"></canvas>
</div>
</body>
</html>
<script th:inline="javascript" th:type="module">
    // add on change event listener to dropdown
    document.getElementById("chart-selection-dropdown").addEventListener("change", function () {
        let url = new URL(window.location.href);
        url.searchParams.set("type", this.value);
        
        window.location.href = url.href;
    });

    import {setupHomeScreen} from "./js/SetupHomeScreen.js";
    /*<![CDATA[*/
    let sdatFiles = /*[[${sdatFiles}]]*/ undefined;
    let meterFiles = /*[[${meterFiles}]]*/ undefined;
    let chartType = /*[[${chartType}]]*/ "[]";
    /*]]>*/

    let data = (sdatFiles !== undefined) ? sdatFiles : meterFiles;
    setupHomeScreen(chartType, data);
</script>

